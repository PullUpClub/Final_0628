(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[507],{311:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});let n=(0,s(2895).A)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},1078:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>D,dynamic:()=>A});var n=s(5155),i=s(5731),a=s(5695),o=s(2115),l=s(8589),r=s(4912);let d=e=>{let{variant:t="default",children:s,className:i=""}=e,a="".concat("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"," ").concat({default:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",elite:"bg-red-600 text-white"}[t]," ").concat(i);return(0,n.jsx)("span",{className:a,children:s})};var c=s(5015),u=s(2895);let m=(0,u.A)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),p=(0,u.A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),x=(0,u.A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),f=(0,u.A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),g=(0,u.A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var b=s(6474);let h=(0,u.A)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);var y=s(2915),v=s(311),w=s(3168),j=s(1218),N=s(6766),k=s(8260),C=s(6874),_=s.n(C);let z={pending:{label:"Pending",variant:"warning"},approved:{label:"Approved",variant:"success"},rejected:{label:"Rejected",variant:"danger"},Pending:{label:"Pending",variant:"warning"},Approved:{label:"Approved",variant:"success"},Rejected:{label:"Rejected",variant:"danger"}},S=()=>{let{t:e}=(0,j.Bd)("admin"),[t,s]=(0,o.useState)([]),[i,a]=(0,o.useState)([]),[u,C]=(0,o.useState)(null),[S,A]=(0,o.useState)(!0),[D,E]=(0,o.useState)(null),[B,M]=(0,o.useState)(1),[R,U]=(0,o.useState)(null),[P,F]=(0,o.useState)(""),[q,L]=(0,o.useState)(!1),[I,T]=(0,o.useState)({month:"All Months",status:"All Status",search:""}),V=async()=>{try{A(!0),E(null);let{data:e,error:t}=await w.ND.from("submissions").select("\n          *,\n          profiles:user_id (\n            id,\n            email,\n            full_name,\n            age,\n            gender,\n            organization,\n            social_media,\n            city,\n            state,\n            role\n          )\n        ").order("created_at",{ascending:!1});if(t)throw console.error("Error fetching submissions:",t),t;if(!e)throw console.warn("No submissions data returned"),Error("No submissions data returned");console.log("Raw submissions data:",e);let n=(e||[]).map((e,t)=>{var s,n,i;return{id:e.id?e.id.toString():"submission-".concat(t),userId:e.user_id,fullName:(null==(s=e.profiles)?void 0:s.full_name)||"Unknown User",email:null==(n=e.profiles)?void 0:n.email,socialHandle:(null==(i=e.profiles)?void 0:i.social_media)||"",challenge:"Pull-Up Challenge",category:e.region||"General",submittedAt:e.created_at,submissionDate:new Date(e.created_at).toLocaleDateString(),status:e.status,featured:e.featured||!1,pullUpCount:e.pull_up_count,claimedCount:e.pull_up_count,verifiedCount:e.actual_pull_up_count,videoUrl:e.video_url,notes:e.notes,adminNotes:e.admin_notes||"",profiles:e.profiles}});console.log("Formatted submissions:",n),s(n),a(n)}catch(e){console.error("Error fetching submissions:",e),E(e instanceof Error?e.message:"Failed to fetch submissions")}finally{A(!1)}};(0,o.useEffect)(()=>{V()},[]),(0,o.useEffect)(()=>{let e=t;"All Status"!==I.status&&(e=e.filter(e=>{var t;let s=e.status.toLowerCase(),n=I.status.toLowerCase();return n.includes("featured")||n.includes("⭐")?!0===e.featured:s===n||(null==(t=z[s])?void 0:t.label.toLowerCase().includes(n))||e.status===I.status})),"All Months"!==I.month&&(e=e.filter(e=>new Date(e.submittedAt||e.submissionDate).toLocaleString("default",{month:"long",year:"numeric"})===I.month)),I.search&&(e=e.filter(e=>(e.fullName||"").toLowerCase().includes(I.search.toLowerCase())||(e.socialHandle||"").toLowerCase().includes(I.search.toLowerCase()))),a(e),M(1)},[I,t]);let H=i.slice((B-1)*50,50*B),O=Math.ceil(i.length/50),W=async(e,t)=>{L(!0);try{let{error:n}=await w.ND.from("submissions").update({admin_notes:t,updated_at:new Date().toISOString()}).eq("id",e);if(n)throw n;s(s=>s.map(s=>s.id===e?{...s,adminNotes:t}:s)),U(null),F(""),console.log("Notes saved successfully"),k.Ay.success("Admin notes saved successfully",{duration:3e3,style:{background:"#1f2937",color:"#ffffff",border:"1px solid #9b9b6f"},iconTheme:{primary:"#9b9b6f",secondary:"#ffffff"}})}catch(e){console.error("Error saving notes:",e),E(e instanceof Error?e.message:"Failed to save notes")}finally{L(!1)}},Y=()=>{U(null),F("")},G=async e=>{try{var t;console.log("Creating rejection email notification for submission:",e.id);let s=e.email;if(!s&&(null==(t=e.profiles)?void 0:t.email)&&(s=e.profiles.email),!s)return void console.error("No email found for user, cannot send rejection notification");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s))return void console.error("Invalid email format:",s);let n=e.adminNotes?'\n          <div style="background: linear-gradient(135deg, #2d1b0d 0%, #1a1a1a 100%); padding: 25px; border-radius: 12px; border-left: 4px solid #918f6f; margin: 25px 0; border: 1px solid #333333;">\n            <h3 style="color: #918f6f; margin: 0 0 15px 0; font-size: 18px; font-weight: 600; display: flex; align-items: center;">\n              \uD83D\uDCDD Feedback from our review team:\n            </h3>\n            <p style="color: #ffffff; font-size: 16px; margin: 0; line-height: 1.6; font-style: italic; background: rgba(145, 143, 111, 0.1); padding: 15px; border-radius: 8px;">\n              "'.concat(e.adminNotes,'"\n            </p>\n          </div>\n        '):"",i={user_id:e.userId,email_type:"rejection",recipient_email:s,subject:"Your Pull-Up Club Submission Was Not Approved",message:'\n          <div style="font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; background-color: #000000; color: #ffffff;">\n            \x3c!-- Header --\x3e\n            <div style="text-align: center; margin-bottom: 30px; padding: 30px 20px; background: linear-gradient(135deg, #111111 0%, #1a1a1a 100%); border-radius: 12px; border: 1px solid #333333;">\n              <h1 style="color: #918f6f; margin: 0; font-size: 32px; font-weight: bold; letter-spacing: -0.5px;">Pull-Up Club</h1>\n              <p style="color: #999999; margin: 8px 0 0 0; font-size: 16px;">Monthly Pull-Up Competition</p>\n            </div>\n\n            \x3c!-- Main Content --\x3e\n            <div style="background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%); padding: 30px; border-radius: 12px; border-left: 4px solid #918f6f; margin-bottom: 30px; border: 1px solid #333333;">\n              <h2 style="color: #ffffff; margin: 0 0 20px 0; font-size: 24px; font-weight: 600;">Submission Update</h2>\n              \n              <p style="color: #ffffff; font-size: 18px; margin-bottom: 20px; line-height: 1.5;">\n                Hi <strong style="color: #918f6f;">'.concat(e.fullName||"there",'</strong>,\n              </p>\n              \n              <p style="color: #cccccc; font-size: 16px; margin-bottom: 25px; line-height: 1.6;">\n                Unfortunately, your recent pull-up submission was not approved.\n              </p>\n\n              ').concat(n,'\n              \n              <p style="color: #ffffff; font-size: 16px; margin-bottom: 20px; line-height: 1.6;">\n                Don\'t worry - you can submit a new video right away! Make sure to:\n              </p>\n              \n              <ul style="color: #cccccc; font-size: 16px; margin: 20px 0; padding-left: 0; list-style: none;">\n                <li style="margin-bottom: 12px; padding-left: 25px; position: relative;">\n                  <span style="position: absolute; left: 0; color: #918f6f; font-weight: bold;">•</span>\n                  Film in good lighting with clear form\n                </li>\n                <li style="margin-bottom: 12px; padding-left: 25px; position: relative;">\n                  <span style="position: absolute; left: 0; color: #918f6f; font-weight: bold;">•</span>\n                  Count your reps accurately\n                </li>\n                <li style="margin-bottom: 12px; padding-left: 25px; position: relative;">\n                  <span style="position: absolute; left: 0; color: #918f6f; font-weight: bold;">•</span>\n                  Follow our submission guidelines\n                </li>\n                <li style="margin-bottom: 12px; padding-left: 25px; position: relative;">\n                  <span style="position: absolute; left: 0; color: #918f6f; font-weight: bold;">•</span>\n                  Ensure video quality is clear\n                </li>\n              </ul>\n              \n              <p style="color: #ffffff; font-size: 16px; margin-top: 25px; line-height: 1.6;">\n                Ready to try again? Log in and submit your new video:\n              </p>\n            </div>\n\n            \x3c!-- CTA Button --\x3e\n            <div style="text-align: center; margin: 30px 0;">\n              <a href="https://pullupclub.com/login" \n                 style="display: inline-block; \n                        background: linear-gradient(135deg, #918f6f 0%, #a19f7f 100%); \n                        color: #000000; \n                        padding: 16px 32px; \n                        text-decoration: none; \n                        border-radius: 8px; \n                        font-weight: 600; \n                        font-size: 16px; \n                        transition: all 0.3s ease;\n                        box-shadow: 0 4px 12px rgba(145, 143, 111, 0.3);">\n                Submit New Video →\n              </a>\n            </div>\n\n            \x3c!-- Footer --\x3e\n            <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #333333; text-align: center;">\n              <p style="color: #ffffff; font-size: 18px; margin: 0 0 10px 0; font-weight: 500;">\n                Keep pushing your limits!\n              </p>\n              <p style="color: #918f6f; font-size: 16px; margin: 0 0 20px 0;">\n                The Pull-Up Club Team\n              </p>\n              <p style="color: #666666; font-size: 12px; margin: 0; line-height: 1.4;">\n                Questions? Contact us at <a href="mailto:support@pullupclub.com" style="color: #918f6f; text-decoration: none;">support@pullupclub.com</a>\n              </p>\n            </div>\n          </div>\n        '),metadata:{admin_notes:e.adminNotes||null,submission_id:e.id},created_at:new Date().toISOString()},{error:a}=await w.ND.from("email_notifications").insert(i);if(a)return void console.error("Error creating email notification:",a);console.log("Rejection email notification queued successfully for:",s);let o={user_id:e.userId,email_type:"resubmission",recipient_email:s,subject:"Your Pull-Up Club Submission - Resubmission Available",message:'\n          <div style="font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; background-color: #000000; color: #ffffff;">\n            \x3c!-- Header --\x3e\n            <div style="text-align: center; margin-bottom: 30px; padding: 30px 20px; background: linear-gradient(135deg, #111111 0%, #1a1a1a 100%); border-radius: 12px; border: 1px solid #333333;">\n              <h1 style="color: #918f6f; margin: 0; font-size: 32px; font-weight: bold; letter-spacing: -0.5px;">Pull-Up Club</h1>\n              <p style="color: #999999; margin: 8px 0 0 0; font-size: 16px;">Monthly Pull-Up Competition</p>\n            </div>\n\n            \x3c!-- Main Content --\x3e\n            <div style="background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%); padding: 30px; border-radius: 12px; border-left: 4px solid #4ade80; margin-bottom: 30px; border: 1px solid #333333;">\n              <h2 style="color: #4ade80; margin: 0 0 20px 0; font-size: 24px; font-weight: 600;">\uD83D\uDD04 Ready to Try Again?</h2>\n              \n              <p style="color: #ffffff; font-size: 18px; margin-bottom: 20px; line-height: 1.5;">\n                Hi <strong style="color: #918f6f;">'.concat(e.fullName||"there",'</strong>,\n              </p>\n              \n              <p style="color: #cccccc; font-size: 16px; margin-bottom: 25px; line-height: 1.6;">\n                Your submission cooldown period has ended and you can now submit a new pull-up video!\n              </p>\n              \n              <div style="background: rgba(74, 222, 128, 0.1); border: 1px solid #4ade80; border-radius: 8px; padding: 20px; margin: 20px 0;">\n                <p style="color: #4ade80; margin: 0; font-weight: bold; font-size: 16px;">\n                  ✅ You\'re eligible for a new submission\n                </p>\n              </div>\n\n              <p style="color: #ffffff; font-size: 16px; margin-bottom: 20px; line-height: 1.6;">\n                Make your next submission count! Remember our guidelines:\n              </p>\n              \n              <ul style="color: #cccccc; font-size: 16px; margin: 20px 0; padding-left: 0; list-style: none;">\n                <li style="margin-bottom: 12px; padding-left: 25px; position: relative;">\n                  <span style="position: absolute; left: 0; color: #4ade80; font-weight: bold;">✓</span>\n                  Record in good lighting with clear visibility\n                </li>\n                <li style="margin-bottom: 12px; padding-left: 25px; position: relative;">\n                  <span style="position: absolute; left: 0; color: #4ade80; font-weight: bold;">✓</span>\n                  Full range of motion - chin over bar, arms fully extended\n                </li>\n                <li style="margin-bottom: 12px; padding-left: 25px; position: relative;">\n                  <span style="position: absolute; left: 0; color: #4ade80; font-weight: bold;">✓</span>\n                  Count your reps accurately and clearly\n                </li>\n                <li style="margin-bottom: 12px; padding-left: 25px; position: relative;">\n                  <span style="position: absolute; left: 0; color: #4ade80; font-weight: bold;">✓</span>\n                  Ensure video quality is clear throughout\n                </li>\n              </ul>\n              \n              <p style="color: #ffffff; font-size: 16px; margin-top: 25px; line-height: 1.6;">\n                Ready to show us what you\'ve got?\n              </p>\n            </div>\n\n            \x3c!-- CTA Button --\x3e\n            <div style="text-align: center; margin: 30px 0;">\n              <a href="https://pullupclub.com/submit" \n                 style="display: inline-block; \n                        background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%); \n                        color: #000000; \n                        padding: 16px 32px; \n                        text-decoration: none; \n                        border-radius: 8px; \n                        font-weight: 600; \n                        font-size: 16px; \n                        transition: all 0.3s ease;\n                        box-shadow: 0 4px 12px rgba(74, 222, 128, 0.3);">\n                Submit New Video →\n              </a>\n            </div>\n\n            \x3c!-- Footer --\x3e\n            <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #333333; text-align: center;">\n              <p style="color: #ffffff; font-size: 18px; margin: 0 0 10px 0; font-weight: 500;">\n                We believe in you!\n              </p>\n              <p style="color: #918f6f; font-size: 16px; margin: 0 0 20px 0;">\n                The Pull-Up Club Team\n              </p>\n              <p style="color: #666666; font-size: 12px; margin: 0; line-height: 1.4;">\n                Questions? Contact us at <a href="mailto:support@pullupclub.com" style="color: #918f6f; text-decoration: none;">support@pullupclub.com</a>\n              </p>\n            </div>\n          </div>\n        '),metadata:{submission_id:e.id,email_sequence:"resubmission_available"},created_at:new Date().toISOString()},{error:l}=await w.ND.from("email_notifications").insert(o);l?console.error("Error creating resubmission email:",l):console.log("Resubmission email notification queued successfully for:",s);let{data:{session:r},error:d}=await w.ND.auth.getSession();if(d||!r)return void console.error("Authentication required for email function:",d);let{error:c}=await w.ND.functions.invoke("send-rejection-email",{headers:{Authorization:"Bearer ".concat(r.access_token),"Content-Type":"application/json"}});c?console.error("Error triggering email function:",c):console.log("Email function triggered successfully - admin notes included via metadata")}catch(e){console.error("Failed to queue rejection email:",e)}},Q=async(e,s,n)=>{A(!0);try{let i=t.find(t=>t.id===e),a={updated_at:new Date().toISOString()};"Approved"===s?(a.status="approved",a.actual_pull_up_count=n):"Rejected"===s&&(a.status="rejected"),console.log("Updating submission with:",a);let{error:o}=await w.ND.from("submissions").update(a).eq("id",e);if(o)throw console.error("Database update error:",o),o;if("Approved"===s&&i&&n)try{console.log("Processing earnings for approved submission:",e);let{data:t,error:s}=await w.ND.rpc("process_submission_earnings",{p_submission_id:e,p_user_id:i.userId,p_pull_up_count:n});s?console.error("Error processing earnings:",s):t&&t.success&&console.log("Earnings processed successfully:",t)}catch(e){console.error("Error processing earnings:",e)}"Rejected"===s&&i&&await G(i),await V(),console.log("Submission ".concat(s.toLowerCase()," successfully"))}catch(e){console.error("Error updating submission:",e),E(e instanceof Error?e.message:"Failed to update submission")}finally{A(!1)}},X=async e=>{A(!0);try{let s=t.find(t=>t.id===e);if(!s)throw Error("Submission not found");let n={featured:!s.featured,updated_at:new Date().toISOString()},{error:i}=await w.ND.from("submissions").update(n).eq("id",e);if(i)throw i;await V(),console.log("Submission featured status toggled successfully")}catch(e){console.error("Error toggling featured status:",e),E(e instanceof Error?e.message:"Failed to toggle featured status")}finally{A(!1)}},$=["All Months",...Array.from(new Set(t.map(e=>new Date(e.submittedAt||e.submissionDate).toLocaleString("default",{month:"long",year:"numeric"})))).filter(Boolean)],K=t.filter(e=>"Pending"===e.status).length;return(0,n.jsx)(l.default,{children:(0,n.jsxs)("div",{className:"min-h-screen bg-black py-8 px-2 md:px-8",children:[(0,n.jsx)("div",{className:"bg-[#918f6f]/10 border border-[#918f6f] text-white p-4 rounded-lg mb-6",children:(0,n.jsxs)("p",{className:"text-sm",children:["\uD83D\uDCE7 ",(0,n.jsx)("strong",{className:"text-[#918f6f]",children:e("submissions.emailBanner.title")})," ",e("submissions.emailBanner.text"),(0,n.jsx)("br",{}),(0,n.jsx)("span",{className:"text-[#918f6f]/80",children:e("submissions.emailBanner.warning")})]})}),(0,n.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,n.jsxs)("div",{className:"flex flex-1 items-center justify-center",children:[(0,n.jsx)(N.default,{src:"/PUClogo-optimized.webp",alt:e("common:misc.logoAlt"),width:48,height:48,className:"h-12 w-auto object-contain mr-4",priority:!0}),(0,n.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-[#918f6f] tracking-wide text-center",children:e("title")})]}),K>0&&(0,n.jsxs)("div",{className:"flex items-center bg-[#9a9871]/10 border border-[#9a9871] rounded-lg px-4 py-2",children:[(0,n.jsx)("span",{className:"w-6 h-6 bg-[#9a9871] text-black font-bold rounded-full flex items-center justify-center mr-2",children:K}),(0,n.jsx)("span",{className:"text-[#9a9871] text-sm font-medium",children:e("submissions.newSubmissions")})]})]}),(0,n.jsx)("div",{className:"flex justify-center mb-8",children:(0,n.jsxs)("div",{className:"bg-[#18181b] rounded-lg border border-[#23231f] p-1",children:[(0,n.jsx)("span",{className:"px-6 py-2 rounded-md bg-[#9b9b6f] text-black font-semibold",children:"Submission Center"}),(0,n.jsx)(_(),{href:"/admin-payouts",className:"px-6 py-2 rounded-md text-[#9a9871] hover:text-[#ededed] transition-colors",children:"Monthly Payouts"})]})}),(0,n.jsxs)("div",{className:"bg-[#18181b] rounded-lg shadow-sm border border-[#23231f] p-4 mb-6",children:[(0,n.jsxs)("div",{className:"flex items-center mb-2 justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(p,{className:"h-5 w-5 text-[#9a9871] mr-2"}),(0,n.jsx)("span",{className:"font-medium text-[#ededed]",children:e("submissions.filterTitle")})]}),(0,n.jsx)(r.Button,{variant:"outline",size:"sm",onClick:()=>T({month:e("submissions.allMonths"),status:e("submissions.allStatuses"),search:""}),children:e("submissions.resetFilters")})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-xs font-medium text-[#ededed] mb-1",children:e("submissions.filterMonth")}),(0,n.jsx)("select",{className:"w-full p-2 border border-[#23231f] rounded-md bg-black text-[#ededed] text-sm",value:I.month,onChange:e=>T(t=>({...t,month:e.target.value})),children:$.map((e,t)=>(0,n.jsx)("option",{value:e,children:e},"month-".concat(t)))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-xs font-medium text-[#ededed] mb-1",children:e("submissions.filterStatus")}),(0,n.jsx)("select",{className:"w-full p-2 border border-[#23231f] rounded-md bg-black text-[#ededed] text-sm",value:I.status,onChange:e=>T(t=>({...t,status:e.target.value})),children:["All Status","Pending","Approved","Rejected","Featured ⭐"].map((e,t)=>(0,n.jsx)("option",{value:e,children:e},"status-".concat(t)))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-xs font-medium text-[#ededed] mb-1",children:e("submissions.search")}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(x,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-[#918f6f]"}),(0,n.jsx)("input",{type:"text",placeholder:e("submissions.searchPlaceholder"),className:"w-full pl-10 pr-4 py-2 border border-[#23231f] rounded-md bg-black text-[#ededed] text-sm",value:I.search,onChange:e=>T(t=>({...t,search:e.target.value}))})]})]})]})]}),(0,n.jsx)("div",{className:"bg-[#18181b] rounded-lg shadow-sm border border-[#23231f] overflow-hidden",children:S?(0,n.jsx)(c.Gu,{message:e("submissions.loading")}):D?(0,n.jsx)(c.W5,{message:D,onRetry:()=>window.location.reload()}):(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"w-full",children:[(0,n.jsx)("thead",{className:"bg-[#23231f] border-b border-[#23231f]",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#ededed] uppercase tracking-wider",children:e("submissions.table.user")}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#ededed] uppercase tracking-wider",children:e("submissions.table.date")}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#ededed] uppercase tracking-wider",children:e("submissions.table.status")}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#ededed] uppercase tracking-wider",children:"Notes"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#ededed] uppercase tracking-wider",children:e("submissions.table.actions")})]})}),(0,n.jsx)("tbody",{className:"bg-black divide-y divide-[#23231f]",children:H.map(t=>(0,n.jsxs)(o.Fragment,{children:[(0,n.jsxs)("tr",{className:"hover:bg-[#23231f] cursor-pointer",onClick:()=>C((null==u?void 0:u.id)===t.id?null:t),children:[(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm font-medium text-[#ededed]",children:t.fullName}),(0,n.jsx)("div",{className:"text-xs text-[#9a9871]",children:t.socialHandle})]})}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-[#ededed]",children:new Date(t.submittedAt||t.submissionDate).toLocaleDateString()}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:((e,t)=>{let s=z[e.toLowerCase()]||z[e]||{label:e,variant:"default"};return(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(d,{variant:s.variant,children:s.label}),t&&(0,n.jsxs)(d,{variant:"default",className:"bg-amber-100 text-amber-800 border-amber-300",children:[(0,n.jsx)(m,{className:"h-3 w-3 mr-1"}),"Featured"]})]})})(t.status,t.featured)}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-[#ededed]",children:t.adminNotes?(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(f,{className:"h-4 w-4 text-[#9a9871] mr-1"}),(0,n.jsxs)("span",{className:"text-xs text-[#9a9871] truncate max-w-[100px]",children:[t.adminNotes.substring(0,20),t.adminNotes.length>20?"...":""]})]}):(0,n.jsx)("span",{className:"text-gray-500 text-xs",children:"No notes"})}),(0,n.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,n.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),window.open(t.videoUrl,"_blank")},children:[(0,n.jsx)(g,{className:"h-4 w-4 mr-1"}),e("submissions.actions.viewVideo")]}),(0,n.jsx)(r.Button,{variant:"secondary",size:"sm",className:"ml-2",onClick:e=>{e.stopPropagation(),C((null==u?void 0:u.id)===t.id?null:t)},children:(0,n.jsx)(b.A,{className:"h-4 w-4"})})]})]}),(null==u?void 0:u.id)===t.id&&(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:5,className:"px-6 py-3 bg-[#1a1a17]",children:(0,n.jsxs)("div",{className:"max-w-4xl w-full",children:[(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("h5",{className:"font-medium text-[#ededed] mb-2 text-sm",children:e("submissions.actions.infoTitle")}),(0,n.jsxs)("div",{className:"bg-[#23231f] p-3 rounded text-sm",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,n.jsx)("span",{className:"text-[#9a9871]",children:e("submissions.actions.claimed")}),(0,n.jsx)("span",{className:"text-[#ededed] font-bold",children:t.pullUpCount})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-[#9a9871]",children:e("submissions.actions.verified")}),(0,n.jsx)("span",{className:"font-bold ".concat(t.verifiedCount?"text-green-400":"text-yellow-400"),children:t.verifiedCount||e("submissions.actions.pending")})]})]})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsxs)("h5",{className:"font-medium text-[#ededed] text-sm flex items-center",children:[(0,n.jsx)(f,{className:"h-4 w-4 mr-2"}),"Admin Notes"]}),R!==t.id&&(0,n.jsx)(r.Button,{variant:"outline",size:"sm",onClick:()=>{var e,s;return e=t.id,s=t.adminNotes,void(U(e),F(s))},className:"text-xs",children:t.adminNotes?"Edit Notes":"Add Notes"})]}),R===t.id?(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("textarea",{value:P,onChange:e=>F(e.target.value),placeholder:"Add notes about this submission (visible to other admins and included in rejection emails)...",className:"w-full p-3 border border-[#23231f] rounded bg-black text-[#ededed] text-sm min-h-[80px] resize-vertical",rows:3}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(r.Button,{variant:"secondary",size:"sm",onClick:()=>W(t.id,P),disabled:q,className:"bg-green-600 hover:bg-green-700 text-white text-xs px-3 py-1",children:q?(0,n.jsx)(n.Fragment,{children:"Saving..."}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h,{className:"h-3 w-3 mr-1"}),"Save Notes"]})}),(0,n.jsx)(r.Button,{variant:"outline",size:"sm",onClick:Y,disabled:q,className:"text-xs px-3 py-1",children:"Cancel"})]})]}):(0,n.jsx)("div",{className:"bg-[#23231f] p-3 rounded text-sm",children:t.adminNotes?(0,n.jsx)("p",{className:"text-[#ededed] whitespace-pre-wrap",children:t.adminNotes}):(0,n.jsx)("p",{className:"text-gray-500 italic",children:"No notes added yet"})})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,n.jsx)("input",{type:"number",placeholder:e("submissions.actions.countPlaceholder"),className:"w-20 px-2 py-1 border border-[#23231f] rounded text-sm bg-black text-[#ededed]",id:"verify-".concat(t.id),defaultValue:t.verifiedCount||t.pullUpCount}),(0,n.jsxs)(r.Button,{variant:"secondary",size:"sm",onClick:()=>{let e=parseInt(document.getElementById("verify-".concat(t.id)).value)||t.pullUpCount;Q(t.id,"Approved",e)},disabled:S,className:"bg-green-600 hover:bg-green-700 text-white text-xs px-3 py-1",children:[(0,n.jsx)(y.A,{className:"h-3 w-3 mr-1"}),e("submissions.actions.approve")]}),(0,n.jsxs)(r.Button,{variant:"secondary",size:"sm",onClick:()=>X(t.id),disabled:S,className:"".concat(t.featured?"bg-amber-700":"bg-amber-600"," hover:bg-amber-700 text-white text-xs px-3 py-1"),children:[(0,n.jsx)(m,{className:"h-3 w-3 mr-1"}),t.featured?e("submissions.actions.unfeature"):e("submissions.actions.feature")]}),(0,n.jsxs)(r.Button,{variant:"secondary",size:"sm",onClick:()=>Q(t.id,"Rejected"),disabled:S,className:"bg-red-600 hover:bg-red-700 text-white text-xs px-3 py-1",children:[(0,n.jsx)(v.A,{className:"h-3 w-3 mr-1"}),e("submissions.actions.reject")]}),(0,n.jsx)("button",{onClick:()=>window.open(t.videoUrl,"_blank"),className:"bg-[#9a9871] hover:bg-[#a5a575] text-black px-3 py-1 rounded text-xs font-semibold",children:e("submissions.actions.watchVideo")})]})]})})})]},t.id))})]})})}),(0,n.jsxs)("div",{className:"mt-6 flex items-center justify-between",children:[(0,n.jsx)("div",{className:"text-sm text-[#ededed]",children:e("submissions.pagination.showing",{count:H.length,total:i.length})}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)(r.Button,{variant:"outline",size:"sm",onClick:()=>M(e=>Math.max(1,e-1)),disabled:1===B,children:e("submissions.pagination.previous")}),(0,n.jsx)("span",{className:"text-[#ededed] text-sm",children:e("submissions.pagination.page",{current:B,total:O})}),(0,n.jsx)(r.Button,{variant:"outline",size:"sm",onClick:()=>M(e=>Math.min(O,e+1)),disabled:B===O,children:e("submissions.pagination.next")})]})]})]})})},A="force-dynamic";function D(){let{user:e,isAdmin:t,isLoading:s}=(0,i.As)(),l=(0,a.useRouter)();return((0,o.useEffect)(()=>{s||e&&t||l.replace("/login")},[e,t,s,l]),s)?(0,n.jsx)("div",{className:"min-h-screen bg-black flex items-center justify-center",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#9b9b6f]"})}):e&&t?(0,n.jsx)(S,{}):null}},2915:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});let n=(0,s(2895).A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},3999:(e,t,s)=>{"use strict";s.d(t,{cn:()=>a});var n=s(2596),i=s(9688);function a(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,i.QP)((0,n.$)(t))}},4912:(e,t,s)=>{"use strict";s.d(t,{Button:()=>c});var n=s(5155),i=s(2115),a=s(4624),o=s(2085),l=s(3999),r=s(1403);let d=(0,o.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,t)=>{let{className:s,variant:i,size:o,asChild:c=!1,trackingName:u,trackingData:m,onClick:p,...x}=e,{trackButtonClick:f}=(0,r.V)(),g=c?a.DX:"button",b=async e=>{u&&await f(u,{variant:i,size:o,...m}),null==p||p(e)};return(0,n.jsx)(g,{className:(0,l.cn)(d({variant:i,size:o,className:s})),ref:t,onClick:b,...x})});c.displayName="Button"},5015:(e,t,s)=>{"use strict";s.d(t,{Gu:()=>i,W5:()=>a});var n=s(5155);s(2115);let i=e=>{let{message:t="Loading...",className:s=""}=e;return(0,n.jsxs)("div",{className:"bg-gray-800 p-8 rounded-lg text-center ".concat(s),children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-white",children:t})]})},a=e=>{let{message:t,className:s="",onRetry:i}=e;return(0,n.jsxs)("div",{className:"bg-red-900 border border-red-700 text-white p-4 rounded-lg flex items-center justify-between ".concat(s),children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,n.jsx)("span",{children:t})]}),i&&(0,n.jsx)("button",{onClick:i,className:"bg-red-800 hover:bg-red-700 text-white text-sm px-3 py-1 rounded-md ml-4 transition-colors",children:"Retry"})]})}},7291:(e,t,s)=>{Promise.resolve().then(s.bind(s,1078))}},e=>{e.O(0,[825,218,661,650,212,260,116,589,441,964,358],()=>e(e.s=7291)),_N_E=e.O()}]);