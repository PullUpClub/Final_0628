(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{1266:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var a=r(5155),n=r(2115),i=r(5695),o=r(3554),l=r(3168);function c(){let{user:e,isLoading:t}=function(){let[e,t]=(0,n.useState)(!0),[r,a]=(0,n.useState)(null),[o,c]=(0,n.useState)(null),s=(0,i.useRouter)();return(0,n.useEffect)(()=>{(async()=>{try{let{data:{user:e}}=await l.ND.auth.getUser();if(a(e),e){let{data:t}=await l.ND.from("profiles").select("*").eq("id",e.id).single();c(t)}}catch(e){console.error("Error getting user:",e)}finally{t(!1)}})();let{data:{subscription:e}}=l.ND.auth.onAuthStateChange(async(e,r)=>{if(null==r?void 0:r.user){a(r.user);let{data:e}=await l.ND.from("profiles").select("*").eq("id",r.user.id).single();c(e)}else a(null),c(null);t(!1),s.refresh()});return()=>{e.unsubscribe()}},[s]),{user:r,profile:o,isLoading:e}}();return(0,n.useEffect)(()=>{let r=!1,a=async()=>{if(window.chatbase&&!r)if(e&&!t)try{let e=await fetch("/api/chatbase/verify-user",{method:"POST",headers:{"Content-Type":"application/json"}});if(e.ok){let{userId:t,hash:a}=await e.json();try{window.chatbase("setUser",{identifier:t,hmac:a}),r=!0,console.log("Chatbase user identity set successfully")}catch(e){console.warn("Chatbase setUser failed, trying alternative method:",e),window.chatbase("identify",{userId:t,signature:a}),r=!0}}else console.warn("Failed to verify user identity for Chatbase")}catch(e){console.error("Error setting up Chatbase identity:",e)}else t||e||console.log("Chatbase: User not authenticated, skipping identity setup")};r=!1,a();let n=setInterval(()=>{window.chatbase&&!r&&a()},500),i=setTimeout(()=>{clearInterval(n)},1e4);return()=>{clearInterval(n),clearTimeout(i)}},[e,t]),null}let s=["/","/leaderboard","/rules","/faq","/ethos"];function d(){let e=(0,i.usePathname)(),t=!!e&&s.includes(e);return((0,n.useEffect)(()=>{t&&console.log("\uD83D\uDD0D Chatbase: Loading on public page:",e)},[e,t]),t)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.default,{id:"chatbase-widget",strategy:"afterInteractive",children:'\n          (function(){if(!window.chatbase||window.chatbase("getState")!=="initialized"){window.chatbase=(...arguments)=>{if(!window.chatbase.q){window.chatbase.q=[]}window.chatbase.q.push(arguments)};window.chatbase=new Proxy(window.chatbase,{get(target,prop){if(prop==="q"){return target.q}return(...args)=>target(prop,...args)}})}const onLoad=function(){const script=document.createElement("script");script.src="https://www.chatbase.co/embed.min.js";script.id="goLMmOPyP_9eunG2YxSmj";script.domain="www.chatbase.co";document.body.appendChild(script)};if(document.readyState==="complete"){onLoad()}else{window.addEventListener("load",onLoad)}})();\n        '}),(0,a.jsx)(c,{})]}):null}},3898:(e,t,r)=>{Promise.resolve().then(r.bind(r,5888)),Promise.resolve().then(r.bind(r,1266)),Promise.resolve().then(r.t.bind(r,4699,23)),Promise.resolve().then(r.t.bind(r,9324,23))},5888:(e,t,r)=>{"use strict";r.d(t,{default:()=>T});var a=r(5155),n=r(2115),i=r(5731),o=r(7271),l=r.n(o);let c=!1;try{l().config({name:"PullUpClub",storeName:"cache",description:"Pull-Up Club performance cache",size:0xa00000,version:1,driver:[l().INDEXEDDB,l().WEBSQL,l().LOCALSTORAGE]}),c=!0}catch(e){console.warn("LocalForage initialization failed:",e),c=!1}let s=new Map,d={leaderboard:3e5};class u{async setCache(e,t,r){try{let a=Date.now()+(r||d.leaderboard),n={data:t,expiry:a};s.set(e,n),c&&await l().setItem(e,n),this.cleanMemoryCache()}catch(e){console.error("Cache set error:",e)}}async getCache(e){try{let t=s.get(e);if(t){if(Date.now()<=t.expiry)return t.data;s.delete(e)}if(c){let t=await l().getItem(e);if(!t)return null;if("object"!=typeof t||!("expiry"in t)||Date.now()>t.expiry)return await this.clearCache(e),null;return s.set(e,t),t.data}return null}catch(e){return console.error("Cache get error:",e),null}}cleanMemoryCache(){let e=Date.now();for(let[t,r]of s.entries())e>r.expiry&&s.delete(t)}async clearCache(e){try{s.delete(e),c&&await l().removeItem(e)}catch(e){console.error("Cache clear error:",e)}}async clearAllCaches(){try{s.clear(),c&&await l().clear()}catch(e){console.error("Cache clearAll error:",e)}}async prefetchData(e,t,r){try{let a=await this.getCache(e);if(a)return a;let n=await t();return await this.setCache(e,n,r),n}catch(e){return console.error("Prefetch error:",e),null}}async warmCache(e){try{if(!c)return void console.log("LocalForage not ready, skipping cache warming");(await Promise.all(e.map(async e=>({key:e,value:await l().getItem(e)})))).forEach(e=>{let{key:t,value:r}=e;r&&"object"==typeof r&&"expiry"in r&&"data"in r&&"number"==typeof r.expiry&&Date.now()<=r.expiry&&s.set(t,r)})}catch(e){console.error("Cache warming error:",e)}}async getCacheInfo(){try{let e=await l().keys(),t=0;for(let r of e){let e=await l().getItem(r);if(e)try{t+=JSON.stringify(e).length}catch(e){}}return{size:t,keys:e}}catch(e){return console.log("Cache info error:",e),{size:0,keys:[]}}}}let f=new u,w=(0,n.createContext)(void 0),h=e=>{let{children:t}=e,[r,i]=(0,n.useState)(null),o=async()=>await f.getCacheInfo(),l=async()=>(await o()).size,c=async()=>{i(await o())},s=async()=>{await f.clearAllCaches(),await c()};return(0,n.useEffect)(()=>{c()},[]),(0,a.jsxs)(w.Provider,{value:{clearAllCaches:s,getCacheSize:l,getCacheInfo:o,cacheInfo:r,refreshCacheInfo:c},children:[t,!1]})};var b=r(5855),p=r(8043),y=r(5695);let m=["/subscribe","/subscription","/payment","/checkout","/success"],g=e=>{let{children:t}=e,{user:r}=(0,i.As)();(0,y.usePathname)();let[o,l]=(0,n.useState)(!1);(0,n.useEffect)(()=>{window.location&&l(m.some(e=>window.location.pathname.startsWith(e)))},[]);let c={appearance:{theme:"flat",variables:{colorPrimary:"#9b9b6f",colorBackground:"#1e1e1e",colorText:"#ffffff",colorDanger:"#ff5555",fontFamily:"Inter, sans-serif",spacingUnit:"4px",borderRadius:"8px"}},customerEmail:null==r?void 0:r.email,loader:"auto"};return o?(0,a.jsx)(b.Elements,{stripe:p.tA,options:c,children:t}):(0,a.jsx)(a.Fragment,{children:t})};function I(e){let{children:t}=e,[r,i]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{i(!0)},[]),(0,a.jsx)("div",{className:r?"opacity-100 transition-opacity duration-300":"opacity-0",children:t})}var x=r(2810);function _(e){let{children:t}=e,r=(0,n.useRef)(null);return(0,n.useEffect)(()=>{let e=new x.A;return r.current=e,e.on("scroll",e=>{}),requestAnimationFrame(function t(r){e.raf(r),requestAnimationFrame(t)}),()=>{e.destroy(),r.current=null}},[]),(0,n.useEffect)(()=>{r.current&&(window.lenis=r.current)},[]),(0,a.jsx)(a.Fragment,{children:t})}var E=r(8832);let C=e=>{let{children:t}=e;return(0,n.useEffect)(()=>{window.__META_PIXEL_INITIALIZED__||(console.log("\uD83D\uDD0D Meta Pixel: Initializing from AnalyticsWrapper"),(0,E.CZ)(),window.__META_PIXEL_INITIALIZED__=!0)},[]),(0,a.jsx)(a.Fragment,{children:t})};var v=r(8260),P=r(2922),q=r(6715),M=r(1828),A=r(7189);r(1618);let j=new P.E({defaultOptions:{queries:{staleTime:12e4,gcTime:3e5,retry:!1,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1},mutations:{retry:!1}}});function k(e){let{children:t}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.l$,{position:"top-right",toastOptions:{duration:3e3,style:{background:"#1f2937",color:"#ffffff",border:"1px solid #9b9b6f"},success:{style:{background:"#1f2937",color:"#ffffff",border:"1px solid #9b9b6f"},iconTheme:{primary:"#9b9b6f",secondary:"#ffffff"}},error:{style:{background:"#1f2937",color:"#ffffff",border:"1px solid #ef4444"}}}}),t,(0,a.jsx)(M.j,{}),(0,a.jsx)(A.b,{})]})}function T(e){let{children:t}=e;return(0,a.jsx)(I,{children:(0,a.jsx)(q.Ht,{client:j,children:(0,a.jsx)(i.OJ,{children:(0,a.jsx)(h,{children:(0,a.jsx)(g,{children:(0,a.jsx)(_,{children:(0,a.jsx)(C,{children:(0,a.jsx)(k,{children:t})})})})})})})})}},8832:(e,t,r)=>{"use strict";r.d(t,{CZ:()=>i,yM:()=>o});let a="1512318086417813";function n(){try{if(!window.fbq||"function"!=typeof window.fbq||!window.fbq.loaded)return!0;return!1}catch(e){return console.warn("\uD83D\uDD0D Meta Pixel: Error checking if blocked:",e),!0}}function i(){if(window.__META_PIXEL_INITIALIZED__)return void console.log("\uD83D\uDD0D Meta Pixel: Already initialized (global flag)");if(window.fbq&&window.fbq.loaded){console.log("\uD83D\uDD0D Meta Pixel: Already initialized from HTML"),window.__META_PIXEL_INITIALIZED__=!0;return}if(window.fbq){console.log("\uD83D\uDD0D Meta Pixel: Already initialized"),window.__META_PIXEL_INITIALIZED__=!0;return}window.__META_PIXEL_INITIALIZED__=!0;let e=document.createElement("script");e.async=!0,e.src="https://connect.facebook.net/en_US/fbevents.js",e.onerror=()=>{console.error("\uD83D\uDD0D Meta Pixel: Failed to load script"),window.__META_PIXEL_INITIALIZED__=!1},e.onload=()=>{console.log("\uD83D\uDD0D Meta Pixel: Script loaded successfully")},document.head.appendChild(e),window.fbq=function(){window.fbq.callMethod?window.fbq.callMethod.apply(window.fbq,arguments):window.fbq.queue.push(arguments)},window.fbq.push=window.fbq,window.fbq.loaded=!0,window.fbq.version="2.0",window.fbq.queue=[],window.fbq("init",a),window.fbq("track","PageView"),console.log("\uD83D\uDD0D Meta Pixel: Initialized with ID:",a)}async function o(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{(function e(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var a;if(n()){console.warn("\uD83D\uDD0D Meta Pixel: Pixel appears to be blocked by ad blocker or not loaded"),i(),setTimeout(()=>{n()?console.error("\uD83D\uDD0D Meta Pixel: Still blocked after retry - falling back to server-side tracking only"):e(t,r)},2e3);return}if(!window.fbq){console.warn("\uD83D\uDD0D Meta Pixel: Not initialized, attempting to initialize..."),i(),setTimeout(()=>{window.fbq?e(t,r):console.error("\uD83D\uDD0D Meta Pixel: Failed to initialize after retry")},1e3);return}let o=["PageView","ViewContent","Search","AddToCart","AddToWishlist","InitiateCheckout","AddPaymentInfo","Purchase","Lead","CompleteRegistration","Subscribe","StartTrial"].includes(t)?"track":"trackCustom";window.fbq&&!window.fbq.debug&&window.fbq("set","debug",!0),window.fbq(o,t,r),console.log("\uD83D\uDD0D Meta Pixel: Tracked event",{method:o,eventName:t,parameters:r,pixelLoaded:!!(null==(a=window.fbq)?void 0:a.loaded),pixelBlocked:n()})}catch(e){console.error("\uD83D\uDD0D Meta Pixel: Error tracking event",{eventName:t,parameters:r,error:e})}})(e,r),await fetch("".concat("https://yqnikgupiaghgjtsaypr.supabase.co","/functions/v1/meta-conversions"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlxbmlrZ3VwaWFnaGdqdHNheXByIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc5NDIzMDMsImV4cCI6MjA2MzUxODMwM30.3rR9EyNlWSLZAoYqlCa3MOJobHH7RHjak0m_3mI6YZs")},body:JSON.stringify({event_name:e,user_data:t,custom_data:r})})}catch(t){console.error("\uD83D\uDD0D Meta Pixel: Error tracking conversion",{eventName:e,error:t})}}},9324:()=>{}},e=>{e.O(0,[722,825,218,661,260,855,503,116,441,964,358],()=>e(e.s=3898)),_N_E=e.O()}]);