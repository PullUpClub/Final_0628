(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{70:(e,t,l)=>{"use strict";l.d(t,{default:()=>w});var i=l(5155),s=l(2115),n=l(5695),r=l(8589),o=l(5731),a=l(1218),c=l(8832);let d=e=>{let{onShowResetForm:t}=e,[l,r]=(0,s.useState)(""),[d,u]=(0,s.useState)(""),[m,x]=(0,s.useState)(!1),[h,f]=(0,s.useState)(""),{signIn:w,user:b}=(0,o.As)(),g=(0,n.useSearchParams)(),p=(0,n.useRouter)(),{t:y}=(0,a.Bd)(["auth","common"]),v=null==g?void 0:g.get("plan"),j=async e=>{e.preventDefault(),x(!0),f("");try{v&&localStorage.setItem("pendingSubscriptionPlan",v),await w(l,d),b&&await (0,c.yM)("Login",{external_id:b.id,email:b.email}),console.log("\uD83D\uDD04 Login successful, auth context will handle redirect...")}catch(t){localStorage.removeItem("pendingSubscriptionPlan");let e=t instanceof Error?t.message:"An error occurred";e.includes("invalid_credentials")?f(y("errors.invalidCredentials")):e.includes("email_not_confirmed")?f(y("errors.emailNotConfirmed")):e.includes("too_many_attempts")?f(y("errors.tooManyAttempts")):f(y("errors.loginFailed",{message:e}))}finally{x(!1)}};return(0,i.jsxs)("form",{onSubmit:j,className:"flex flex-col w-full gap-4",children:[(0,i.jsxs)("div",{className:"w-full flex flex-col gap-3",children:[(0,i.jsx)("input",{placeholder:y("login.emailLabel"),type:"email",value:l,onChange:e=>r(e.target.value),className:"w-full px-5 py-3 rounded-xl bg-white/10 text-white placeholder-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-[#9b9b6f]",required:!0}),(0,i.jsx)("input",{placeholder:y("login.passwordLabel"),type:"password",value:d,onChange:e=>u(e.target.value),className:"w-full px-5 py-3 rounded-xl bg-white/10 text-white placeholder-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-[#9b9b6f]",required:!0}),(0,i.jsx)("div",{className:"text-right",children:(0,i.jsx)("button",{type:"button",onClick:t,className:"text-xs text-gray-400 hover:text-white underline",children:y("login.forgotPassword")})}),h&&(0,i.jsx)("div",{className:"text-sm text-red-400 text-left",children:h})]}),(0,i.jsx)("hr",{className:"opacity-10"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("button",{type:"submit",disabled:m,className:"w-full bg-white/10 text-white font-medium px-5 py-3 rounded-full shadow hover:bg-white/20 transition mb-3 text-sm",children:m?y("common:status.loading"):v?y("login.signInAndProceed"):y("login.submitButton")}),(0,i.jsx)("div",{className:"w-full text-center mt-2",children:(0,i.jsxs)("span",{className:"text-xs text-gray-400",children:[y("login.noAccount")," ",(0,i.jsx)("button",{type:"button",onClick:()=>{p.push("/subscribe")},className:"underline text-white/80 hover:text-white",children:v?y("login.signUpAndProceed"):y("login.signupLink")})]})})]})]})},u=e=>{let{onBackToLogin:t,onResetSent:l}=e,[n,r]=(0,s.useState)(""),[c,d]=(0,s.useState)(!1),[u,m]=(0,s.useState)(""),{resetPassword:x}=(0,o.As)(),{t:h}=(0,a.Bd)(["auth","common"]),f=async e=>{if(e.preventDefault(),!n)return void m(h("errors.invalidEmail"));d(!0),m("");try{await x(n),l(n)}catch(t){let e=t instanceof Error?t.message:"An error occurred";e.includes("User not found")?m(h("errors.userNotFound")):m(e)}finally{d(!1)}};return(0,i.jsxs)("form",{onSubmit:f,className:"w-full flex flex-col gap-4",children:[(0,i.jsx)("p",{className:"text-sm text-gray-300 text-center mb-2",children:h("resetPassword.instructions")}),(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)("input",{type:"email",value:n,onChange:e=>r(e.target.value),placeholder:h("resetPassword.emailLabel"),className:"w-full px-5 py-3 rounded-xl bg-white/10 text-white placeholder-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-[#9b9b6f]",required:!0})}),u&&(0,i.jsx)("div",{className:"text-sm text-red-400 text-left",children:u}),(0,i.jsx)("button",{type:"submit",disabled:c,className:"w-full bg-white/10 text-white font-medium px-5 py-3 rounded-full shadow hover:bg-white/20 transition mb-3 text-sm",children:c?h("common:status.loading"):h("resetPassword.submitButton")}),(0,i.jsx)("div",{className:"text-center mt-2",children:(0,i.jsx)("button",{type:"button",onClick:t,className:"text-xs text-gray-400 hover:text-white underline",children:h("resetSent.backToLogin")})})]})};var m=l(5324);let x=e=>{let{email:t,onBackToLogin:l}=e,{t:s}=(0,a.Bd)("auth");return(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)(m.A,{size:48,className:"mx-auto text-green-500 mb-4"}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-white",children:s("resetSent.title")}),(0,i.jsx)("p",{className:"text-gray-300 mt-2",children:s("resetSent.message",{email:t})}),(0,i.jsxs)("div",{className:"space-y-4 w-full mt-6",children:[(0,i.jsx)("p",{className:"text-gray-400 text-sm",children:s("resetSent.additionalInfo")}),(0,i.jsx)("button",{type:"button",onClick:l,className:"w-full bg-white/10 text-white font-medium px-5 py-3 rounded-full shadow hover:bg-white/20 transition mb-3 text-sm",children:s("resetSent.backToLogin")})]})]})};var h=l(798),f=l(6766);let w=()=>{let[e,t]=(0,s.useState)(!1),[l,a]=(0,s.useState)(!1),[c,m]=(0,s.useState)(""),{user:w,profile:b,isLoading:g}=(0,o.As)(),p=(0,n.useRouter)(),y=(0,n.useSearchParams)(),{trackViewContent:v}=(0,h.Q)(),j=(0,s.useRef)(!1);(0,s.useEffect)(()=>{j.current||(j.current=!0,v({},{name:"Login Page",category:"login",type:"page"}).catch(()=>{}))},[v]);let N=()=>{t(!1),a(!1),m("")},I=null==y?void 0:y.get("plan");return l?(0,i.jsx)(r.default,{children:(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-black",children:(0,i.jsxs)("div",{className:"relative z-10 w-full max-w-sm rounded-3xl bg-gradient-to-r from-[#ffffff10] to-[#121212] backdrop-blur-sm shadow-2xl p-8 flex flex-col items-center",children:[(0,i.jsx)("div",{className:"mb-6",children:(0,i.jsx)(f.default,{src:"/PUClogo-optimized.webp",alt:"Pull-Up Club Logo",width:64,height:64,className:"h-16 w-auto",priority:!0})}),(0,i.jsx)(x,{email:c,onBackToLogin:N})]})})}):e?(0,i.jsx)(r.default,{children:(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-black",children:(0,i.jsxs)("div",{className:"relative z-10 w-full max-w-sm rounded-3xl bg-gradient-to-r from-[#ffffff10] to-[#121212] backdrop-blur-sm shadow-2xl p-8 flex flex-col items-center",children:[(0,i.jsx)("div",{className:"mb-6",children:(0,i.jsx)(f.default,{src:"/PUClogo-optimized.webp",alt:"Pull-Up Club Logo",width:64,height:64,className:"h-16 w-auto",priority:!0})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-[#9b9b6f] mb-6 text-center tracking-wider",children:"Reset Password"}),(0,i.jsx)(u,{onBackToLogin:N,onResetSent:e=>{m(e),a(!0)}})]})})}):(0,i.jsx)(r.default,{children:(0,i.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-black relative overflow-hidden w-full",children:[(0,i.jsxs)("div",{className:"relative z-10 w-full max-w-sm rounded-3xl bg-gradient-to-r from-[#ffffff10] to-[#121212] backdrop-blur-sm shadow-2xl p-8 flex flex-col items-center",children:[(0,i.jsx)("div",{className:"flex items-center justify-center mb-6",children:(0,i.jsx)(f.default,{src:"/PUClogo-optimized.webp",alt:"Pull-Up Club Logo",width:64,height:64,className:"h-16 w-auto",priority:!0})}),(0,i.jsx)("h2",{className:"text-2xl font-semibold text-[#9b9b6f] mb-6 text-center tracking-wider",children:"BATTLE BUNKER"}),(0,i.jsxs)("p",{className:"text-gray-400 text-sm mb-4 text-center",children:["New here? ",(0,i.jsx)("button",{type:"button",onClick:()=>{p.push("/subscription")},className:"underline text-white/80 hover:text-white",children:"Sign up to get started"})]}),(0,i.jsx)(d,{onShowResetForm:()=>{t(!0)}})]}),I&&(0,i.jsx)("div",{className:"relative z-10 mt-8 flex flex-col items-center text-center",children:(0,i.jsxs)("p",{className:"text-gray-400 text-sm mb-2",children:["You are about to sign in to subscribe to the ","monthly"===I?"$9.99/month":"$99.00/year"," plan. Payment will be processed after account creation/login."]})})]})})}},5015:(e,t,l)=>{"use strict";l.d(t,{Gu:()=>s,W5:()=>n});var i=l(5155);l(2115);let s=e=>{let{message:t="Loading...",className:l=""}=e;return(0,i.jsxs)("div",{className:"bg-gray-800 p-8 rounded-lg text-center ".concat(l),children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),(0,i.jsx)("p",{className:"text-white",children:t})]})},n=e=>{let{message:t,className:l="",onRetry:s}=e;return(0,i.jsxs)("div",{className:"bg-red-900 border border-red-700 text-white p-4 rounded-lg flex items-center justify-between ".concat(l),children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,i.jsx)("span",{children:t})]}),s&&(0,i.jsx)("button",{onClick:s,className:"bg-red-800 hover:bg-red-700 text-white text-sm px-3 py-1 rounded-md ml-4 transition-colors",children:"Retry"})]})}},5151:(e,t,l)=>{Promise.resolve().then(l.bind(l,8261)),Promise.resolve().then(l.bind(l,70))},5324:(e,t,l)=>{"use strict";l.d(t,{A:()=>i});let i=(0,l(2895).A)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},8261:(e,t,l)=>{"use strict";l.d(t,{default:()=>a});var i=l(5155),s=l(2115),n=l(5695),r=l(5731),o=l(5015);let a=e=>{let{children:t,requireAuth:l=!0,redirectTo:a="/login"}=e,{user:c,isLoading:d,subscriptionState:u}=(0,r.As)(),m=(0,n.useRouter)(),x=(0,n.usePathname)();return(s.useEffect(()=>{if(!d&&(!l||"loading"!==u)){if(l&&!c){let e="".concat(a,"?redirect=").concat(encodeURIComponent(x||"/"));m.push(e);return}if(!l&&c)return void m.push("/profile")}},[c,d,u,l,a,x,m]),d||l&&"loading"===u)?(0,i.jsx)(o.Gu,{message:"Checking authentication..."}):l&&!c?(0,i.jsx)(o.Gu,{message:"Redirecting to login..."}):!l&&c?(0,i.jsx)(o.Gu,{message:"Redirecting to profile..."}):(0,i.jsx)(i.Fragment,{children:t})}},8832:(e,t,l)=>{"use strict";l.d(t,{CZ:()=>n,yM:()=>r});let i="1512318086417813";function s(){try{if(!window.fbq||"function"!=typeof window.fbq||!window.fbq.loaded)return!0;return!1}catch(e){return console.warn("\uD83D\uDD0D Meta Pixel: Error checking if blocked:",e),!0}}function n(){if(window.__META_PIXEL_INITIALIZED__)return void console.log("\uD83D\uDD0D Meta Pixel: Already initialized (global flag)");if(window.fbq&&window.fbq.loaded){console.log("\uD83D\uDD0D Meta Pixel: Already initialized from HTML"),window.__META_PIXEL_INITIALIZED__=!0;return}if(window.fbq){console.log("\uD83D\uDD0D Meta Pixel: Already initialized"),window.__META_PIXEL_INITIALIZED__=!0;return}window.__META_PIXEL_INITIALIZED__=!0;let e=document.createElement("script");e.async=!0,e.src="https://connect.facebook.net/en_US/fbevents.js",e.onerror=()=>{console.error("\uD83D\uDD0D Meta Pixel: Failed to load script"),window.__META_PIXEL_INITIALIZED__=!1},e.onload=()=>{console.log("\uD83D\uDD0D Meta Pixel: Script loaded successfully")},document.head.appendChild(e),window.fbq=function(){window.fbq.callMethod?window.fbq.callMethod.apply(window.fbq,arguments):window.fbq.queue.push(arguments)},window.fbq.push=window.fbq,window.fbq.loaded=!0,window.fbq.version="2.0",window.fbq.queue=[],window.fbq("init",i),window.fbq("track","PageView"),console.log("\uD83D\uDD0D Meta Pixel: Initialized with ID:",i)}async function r(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{(function e(t){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var i;if(s()){console.warn("\uD83D\uDD0D Meta Pixel: Pixel appears to be blocked by ad blocker or not loaded"),n(),setTimeout(()=>{s()?console.error("\uD83D\uDD0D Meta Pixel: Still blocked after retry - falling back to server-side tracking only"):e(t,l)},2e3);return}if(!window.fbq){console.warn("\uD83D\uDD0D Meta Pixel: Not initialized, attempting to initialize..."),n(),setTimeout(()=>{window.fbq?e(t,l):console.error("\uD83D\uDD0D Meta Pixel: Failed to initialize after retry")},1e3);return}let r=["PageView","ViewContent","Search","AddToCart","AddToWishlist","InitiateCheckout","AddPaymentInfo","Purchase","Lead","CompleteRegistration","Subscribe","StartTrial"].includes(t)?"track":"trackCustom";window.fbq&&!window.fbq.debug&&window.fbq("set","debug",!0),window.fbq(r,t,l),console.log("\uD83D\uDD0D Meta Pixel: Tracked event",{method:r,eventName:t,parameters:l,pixelLoaded:!!(null==(i=window.fbq)?void 0:i.loaded),pixelBlocked:s()})}catch(e){console.error("\uD83D\uDD0D Meta Pixel: Error tracking event",{eventName:t,parameters:l,error:e})}})(e,l),await fetch("".concat("https://yqnikgupiaghgjtsaypr.supabase.co","/functions/v1/meta-conversions"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlxbmlrZ3VwaWFnaGdqdHNheXByIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc5NDIzMDMsImV4cCI6MjA2MzUxODMwM30.3rR9EyNlWSLZAoYqlCa3MOJobHH7RHjak0m_3mI6YZs")},body:JSON.stringify({event_name:e,user_data:t,custom_data:l})})}catch(t){console.error("\uD83D\uDD0D Meta Pixel: Error tracking conversion",{eventName:e,error:t})}}}},e=>{e.O(0,[825,218,661,650,116,589,441,964,358],()=>e(e.s=5151)),_N_E=e.O()}]);